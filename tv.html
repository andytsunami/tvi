<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Socket.io Demo</title>

  <style>
    
  </style>
</head>
<body>
<h1>
<div>OLÁ EU SOU A, <span id="username">Guest</span></div>
</h1>

<input type="button" value="Propagar" id="pp" />
<ul id="messages">

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<script>
  var socket = io.connect('http://localhost:3000');

  
  var username = "TV";
  socket.emit("add-user", {"username": username});
  $("#username").text(username);

  // Chat form
 var chat_form = $(".chat-form");
 chat_form.on("submit", function(){

     // Send the message to the server
     socket.emit("peopple-message", {
      "group" : "pessoa",
      "username": $(this).find("input:first").val(),
      "content": $(this).find("textarea").val()
     });

     // Empty the form
     $(this).find("input:first, textarea").val('');
    return false;
 });

 // Whenever we receieve a message, append it to the <ul>
 socket.on("add-message", function(dataP){
  console.log(dataP);
  $("#messages").append($("<li>", {
    "text": dataP.content + ' - ' + dataP.dest
  }));
 });

$("#pp").click(function(){
  socket.emit("public",{
    "group" : "pessoa",
    "content" : "Atualiza aí cambada!"
  })
});
</script>
</body>
</html>